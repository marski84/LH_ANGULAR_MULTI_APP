<h3>Add new company:</h3>
<form
    [formGroup]="companyForm"
    (submit)="onSubmit(companyForm.value)"
>

    <table
        class="example-full-width"
        cellspacing="0"
    >
        <tbody>
            <tr>
                <td>
                    <mat-form-field appearance="fill">
                        <mat-label>Company name</mat-label>
                        <input
                            matInput
                            [formControl]="companyNameCtrl"
                        >
                        <mat-error *ngIf="companyNameCtrl.touched && companyNameCtrl.hasError('required')">This field is required</mat-error>
                    </mat-form-field>

                </td>

                <td>

                    <mat-form-field appearance="fill">
                        <mat-label>Business Type</mat-label>
                        <mat-select
                            [formControl]="companyBusinessTypeFormCtrl"
                            placeholder="Type of business"
                        >
                            <mat-option
                                [value]="business.value"
                                *ngFor="let business of typeOfBusinessSelectOptions"
                            >
                                {{business.viewValue}}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="companyBusinessTypeFormCtrl.touched && companyBusinessTypeFormCtrl.hasError('required')">This field is required</mat-error>
                    </mat-form-field>
                </td>
            </tr>
        </tbody>
    </table>
    <mat-divider></mat-divider>

    <div class="add-employee-form">

        <ng-container formArrayName="companyEmployees">

            <ng-container *ngFor="let employeeForm of companyEmployeesControls; let i = index; trackBy: trackByFn">
                {{employeeForm.value[0] | json}}
                <div
                    class="employee-form-row"
                    [formGroupName]="i"
                >
                    <div>{{employeeForm.status}}</div>

                    <!-- <app-employee-form [formData]="companyEmployeesArray[i]"></app-employee-form> -->

                    <app-employee-form
                        [parentForm]="companyForm"
                        [employeeForm]="employeeForm"
                    ></app-employee-form>

                    <mat-icon
                        *ngIf="i!==0"
                        class="delete-btn"
                        (click)="deleteEmployeeForm(i)"
                    >
                        delete
                    </mat-icon>
                </div>

                <mat-error *ngIf="employeeForm.touched && companyEmployeesNameCtrl(i).invalid">All Fields are requiered</mat-error>

            </ng-container>

        </ng-container>

        <button
            mat-mini-fab
            type="button"
            (click)="addEmployeeForm()"
        >
            <mat-icon class="add-employee-btn">add</mat-icon>
        </button>

        <button
            *ngIf="companyData"
            mat-mini-fab
            type="submit"
        >
            Edit Data
            <mat-icon class="add-employee-btn">edit</mat-icon>
        </button>

    </div>

    <!-- połączył guzik edit i save -->
    <button
        *ngIf="!companyData"
        mat-button
        type="submit"
    >
        Submit
    </button>
</form>
